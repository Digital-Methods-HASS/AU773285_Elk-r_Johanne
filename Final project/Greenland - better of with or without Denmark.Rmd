---
title: "Greenland - better of with or without Denmark"
authors: "Emil Uhre Sørensen, Rasmus Andsbjerg Johansen, Jonas Kolborg Nørgaard og Johanne Elkær Hansen"
output: html_document
date: "2025-05-05"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r libraries, include=FALSE}
library(tidyverse)
library(ggplot2)
library(dplyr)
library(tidyr)
library(readr)
```

## Load datasets
``` {r eval=TRUE}
GDP_per_Capita <- read_csv2("data/GDP per Capita US Dollars.csv")

Hisorical_Population <- read_csv2("data/Historical population.csv")

Life_expectancy <- read_csv("data/life-expectancy-at-birth-including-the-un-projections.csv")

GDP <- read_csv2("data/GDP.csv")

Net_migration <- read_csv2("data/Net migration.csv")

Child_mortality_under_5 <- read_csv("data/Transformed_Børnedødelighed (1).csv")
```

# GDP

```{r eval=TRUE}
# Convert from wide to long format
gdp_with_year <- GDP %>%
  pivot_longer(cols = -`Country Name`, names_to = "Year", values_to = "GDP") %>%
  mutate(Year = as.numeric(Year)) %>% 
  na.omit(GDP) %>%
  mutate(GDP = GDP / 1e9)

# Creating the ggplot
GDP_by_Country <- ggplot(gdp_with_year, aes(x = Year, y = GDP, color = `Country Name`)) +
  geom_line(size=1.5) +
  labs(title = "GDP Over Time by Country",
       x = "Year",
       y = "GDP (in billions)", 
       color = "Country") +
  theme_minimal()+
  theme(plot.title = element_text(size = 20), legend.title = element_text(size = 14),legend.text = element_text(size = 12))

GDP_by_Country
```

```{r, eval=TRUE}
selected_countries <- c("Greenland", "Faroe Islands", "Iceland")

gdp_G_F_I <- gdp_with_year %>%
  filter(`Country Name` %in% selected_countries)


GDP_Greenland_FaroeIslands_Iceland <- ggplot(gdp_G_F_I, aes(x = Year, y = GDP, color = `Country Name`)) +
  geom_line(size=1.5) +
  labs(title = "GDP Over Time for Greenland, Faroe Islands, and Iceland",
       x = "Year",
       y = "GDP (in billions)",
       color = "Country") +
  theme_minimal()+
  theme(plot.title = element_text(size = 20),legend.title = element_text(size = 14),legend.text = element_text(size = 12))

GDP_Greenland_FaroeIslands_Iceland
```


### Moveable graphs
```{r, include=FALSE}
#install.packages("plotly")
library(plotly)

#ianstll.packages("gganimate")
library(gganimate)

##ianstll.packages("gifski")
library(gifski)
```

```{r eval=TRUE}
ggplotly(GDP_by_Country)
```


```{r eval=TRUE}
animated_plot <- GDP_by_Country +
  transition_reveal(Year) +
  labs(title = 'GDP Over Time by Country: 1960-2021')

GDP_animated <- animate(animated_plot, nframes = 100, fps = 10,
renderer = gifski_renderer())
#anim_save("GNP_2.gif", animation = GDP_animated)

GDP_animated
```

```{r eval=TRUE}
ggplotly(GDP_Greenland_FaroeIslands_Iceland)
```

```{r eval=TRUE}
animated_plot <- GDP_Greenland_FaroeIslands_Iceland +
  transition_reveal(Year) +
  labs(title = 'GDP Over Time by Country: 1960-2021')

GDP_animated_Greenland_FaroeIslands_Iceland <- animate(animated_plot, nframes = 100, fps = 10,
renderer = gifski_renderer())
#anim_save("GDP_animated_Greenland_FaroeIslands_Iceland_2.gif", animation = GDP_animated_Greenland_FaroeIslands_Iceland)

GDP_animated_Greenland_FaroeIslands_Iceland
```


# Life Expectanty
```{r eval=TRUE}
head(Life_expectancy)
```

```{r eval=TRUE}
Life_expectancy_with_year <- Life_expectancy %>% 
  filter(Year <= "2023") %>%  
  mutate(Year = as.numeric(Year), `Life expectancy - Sex: all - Age: 0 - Variant: estimates` =as.numeric(`Life expectancy - Sex: all - Age: 0 - Variant: estimates`)) %>% 
  rename(Life_expectancy_data = `Life expectancy - Sex: all - Age: 0 - Variant: estimates`)

# Creating the ggplot
Life_expectancy_by_birth <- ggplot(Life_expectancy_with_year, aes(x=Year, y= Life_expectancy_data, color=Entity)) +
  geom_line(size=1.5) +
  labs(title="Life Expectancy at Birth", x="Year", y="Life Expectancy (in years)", color = "Country") +
  theme_minimal()+
  theme(plot.title = element_text(size = 20),legend.title = element_text(size = 14),legend.text = element_text(size = 12))

Life_expectancy_by_birth
```

### Moveable graphs
```{r eval=TRUE}
ggplotly(Life_expectancy_by_birth)
```

```{r eval=TRUE}
animated_plot_LE <- Life_expectancy_by_birth +
  transition_reveal(Year) +
  labs(title = 'Life expectancy at birth: 1950-2023')

Life_expectancy_by_birth_animated <- animate(animated_plot_LE, nframes = 100, fps = 10, renderer = gifski_renderer())
#anim_save("Life_expectancy_by_birth_animated_2.gif", animation = Life_expectancy_by_birth_animated)

Life_expectancy_by_birth_animated
```





